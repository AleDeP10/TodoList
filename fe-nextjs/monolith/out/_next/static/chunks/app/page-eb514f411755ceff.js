(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{378:(e,t,s)=>{"use strict";function a(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()}s.d(t,{o:()=>a})},454:(e,t,s)=>{"use strict";s.d(t,{TB:()=>r,r4:()=>i});var a=s(5155),n=s(2115);let i=(0,n.createContext)(void 0);function r(e){let{children:t}=e,[s,r]=(0,n.useState)("home");return(0,a.jsx)(i.Provider,{value:{view:s,setView:r},children:t})}},3810:(e,t,s)=>{Promise.resolve().then(s.bind(s,4963))},4963:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eE});var a=s(5155),n=s(2115),i=s(4416),r=s(3717),l=s(4126),o=s(6932),c=s(7533),u=s(9103),d=s(2138),m=s(6078),p=s(646),x=s(4229),g=s(1154),f=s(142),v=s(7580),h=s(9772),b=s(662);let j={close:(0,a.jsx)(i.A,{size:16}),edit:(0,a.jsx)(r.A,{size:16}),delete:(0,a.jsx)(l.A,{size:16}),filter:(0,a.jsx)(o.A,{size:16}),removeFilter:(0,a.jsx)(c.A,{size:16}),plus:(0,a.jsx)(u.A,{size:16}),arrowRight:(0,a.jsx)(d.A,{size:16}),cancel:(0,a.jsx)(m.A,{size:16}),confirm:(0,a.jsx)(p.A,{size:16}),save:(0,a.jsx)(x.A,{size:16}),spinner:(0,a.jsx)(g.A,{className:"animate-spin text-yellow-400",size:64})},y={tasks:(0,a.jsx)(f.A,{size:16}),users:(0,a.jsx)(v.A,{size:16}),author:(0,a.jsx)(h.A,{size:16}),portfolio:(0,a.jsx)(b.A,{size:16})};var k=s(6721);function N(){let e=(0,n.useContext)(k.s);if(!e)throw Error("useLang must be used within LangProvider");return e}function C(){let{lang:e}=N();return(t,s)=>(0,k.t)(e,t,s)}function w(e){let{value:t,options:s,onChange:n,getOptionValue:i=e=>String(e),getOptionLabel:r=e=>String(e)}=e;return(0,a.jsx)("select",{value:i(t),onChange:e=>{let t=e.target.value,a=s.find(e=>i(e)===t);void 0!==a&&n(a)},className:"text-sm p-2 rounded border border-gray-300   focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[var(--fg)]   bg-[var(--bg)] text-[var(--fg)]",children:s.map((e,t)=>(0,a.jsx)("option",{value:i(e),className:"bg-[var(--bg)] text-[var(--fg)]",children:r(e)},t))})}function A(){let[e,t]=function(){let[e,t]=(0,n.useState)(()=>{{let e=localStorage.getItem("theme");return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}}),s=e=>{t(e),localStorage.setItem("theme",e),document.querySelectorAll("link[data-theme]").forEach(e=>e.remove());let s=document.createElement("link");s.rel="stylesheet",s.href="/themes/".concat(e,"-theme.css"),s.setAttribute("data-theme","true"),document.head.appendChild(s)};return(0,n.useEffect)(()=>{s(e)}),[e,s]}();return(0,a.jsx)(w,{value:e,options:["dark","light","custom"],onChange:e=>t(e)})}let E=["it","en"];function S(){let{lang:e,setLang:t}=N();return(0,a.jsx)("div",{className:"flex gap-2 items-center",role:"group","aria-label":"Lingua",children:E.map(s=>(0,a.jsx)("button",{onClick:()=>t(s),className:"px-2 py-1 text-sm border rounded ".concat(e===s?"bg-blue-600 text-white":"border-gray-300"),children:s.toUpperCase()},s))})}function T(e){let{label:t,icon:s,href:n,onClick:i}=e;return(0,a.jsx)("button",{onMouseDown:()=>{n?window.open(n,"_blank","noopener,noreferrer"):null==i||i()},className:"text-sm text-left px-2 py-1 rounded hover:bg-[var(--menu-hover-bg)] text-[var(--menu-fg)]",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[s,t]})})}function z(e){let{label:t,items:s}=e,[i,r]=(0,n.useState)(!1),l=(0,n.useRef)(null);return(0,a.jsxs)("div",{className:"relative",ref:l,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,a.jsx)("button",{className:"px-3 py-2 bg-[var(--menu-bg)] text-sm font-semibold rounded hover:brightness-110",children:t}),i&&(0,a.jsx)("div",{className:"absolute top-full left-0 z-50 bg-[var(--menu-bg)] rounded shadow-md min-w-[140px] p-2",children:(0,a.jsx)("div",{className:"flex flex-col gap-1",children:s.map(e=>(0,a.jsx)(T,{...e,onClick:()=>{var t;null==(t=e.onClick)||t.call(e),r(!1)}},e.label))})})]})}function I(e){let{menuItems:t,children:s}=e,n=C();return(0,a.jsxs)("nav",{className:"flex flex-wrap-reverse justify-between items-center px-6 py-4 gap-2 border-b text-[var(--navbar-fg)] bg-gradient-to-r from-[var(--navbar-start)] to-[var(--navbar-end)]",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:Object.entries(t).map(e=>{let[t,s]=e;return(0,a.jsx)(z,{label:n("menu.section.".concat(t.toLowerCase())),items:s},t)})}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[s,(0,a.jsx)(A,{}),(0,a.jsx)(S,{})]})]})}var O=s(454),P=s(4540),D=s(7848),M=s(8924);let L=(0,M.Mz)([e=>e.users.filters],e=>e);var F=s(2960),R=s(6715),U=s(5041),V=s(7670);function B(e,t,s){let{data:a=[],...n}=e();return{data:a.filter(e=>s(e,t)).sort((e,t)=>e.id?t.id?e.id<t.id?-1:+(e.id>t.id):1:-1),...n}}let G=(e,t,s)=>{let a=(0,P.wA)(),i=C(),r=(0,F.I)({queryKey:null!=s?s:[e],queryFn:t});return(0,n.useEffect)(()=>{r.isFetching&&a((0,V.r1)(!0)),r.isError&&r.error instanceof Error&&(a((0,V.P0)({type:"error",message:i("entity.fetch.error",{entity:i("entity.".concat(e)),error:r.error.message})})),console.error("error while fetching ".concat(e),r.error)),r.isFetching||a((0,V.r1)(!1))},[r.isFetching,r.isError,r.error,a,i,e]),r},K=(e,t,s,a)=>{let n=(0,P.wA)(),i=(0,R.jE)(),r=C();return(0,U.n)({mutationFn:async e=>{let{entity:a}=e;if(n((0,V.r1)(!0)),!a.id)return await t(a);await s(a)},onSuccess:()=>{n((0,V.r1)(!1)),i.invalidateQueries({queryKey:null!=a?a:[e]}),n((0,V.P0)({type:"success",message:r("entity.save.success",{entity:r("entity.".concat(e))})}))},onError:t=>{n((0,V.r1)(!1)),n((0,V.P0)({type:"error",message:r("entity.save.error",{entity:r("entity.".concat(e)),message:t.message})})),console.error("error while saving ".concat(e),t)}})},_=(e,t,s)=>{let a=(0,P.wA)(),n=(0,R.jE)(),i=C();return(0,U.n)({mutationFn:async e=>{a((0,V.r1)(!0)),await t(e)},onSuccess:()=>{a((0,V.r1)(!1)),n.invalidateQueries({queryKey:null!=s?s:[e]}),a((0,V.P0)({type:"delete",message:i("entity.delete.success",{entity:i("entity.".concat(e))})}))},onError:t=>{a((0,V.r1)(!1)),a((0,V.P0)({type:"error",message:i("entity.delete.error",{entity:i("entity.".concat(e)),message:t.message})})),console.error("error while deleting ".concat(e),t)}})},q=s(3464).A.create({baseURL:"https://localhost/api",headers:{"Content-Type":"application/json"},timeout:5e3}),Q=async()=>(await q.post("/User/filter",{})).data,Z=async e=>(await q.post("/User",e)).data,J=async e=>{await q.put("/User/".concat(e.id),e)},H=async e=>{await q.delete("/User/".concat(e))},W=(e,t)=>{let s=e.username.toLowerCase().includes(t.username.toLowerCase()),a=e.fullName.toLowerCase().includes(t.fullName.toLowerCase()),n=t.statusMap[e.status];return s&&a&&n},X=()=>G("User",Q),Y=()=>{let{data:e=[],isFetching:t,isError:s,error:a}=X();return{users:e,isFetching:t,isError:s,error:a}};var $=s(6379),ee=s(378);s(9673);let et=e=>{var t;let{label:s,icon:n,size:i="medium",variant:r="primary",disabled:l=!1,tooltip:o,backgroundColor:c,foregroundColor:u,onClick:d}=e,m=l?"opacity-50 grayscale-[70%] cursor-not-allowed":"",p=c?"hover:[filter:var(--hover-darken)]":"",x={...c?{backgroundColor:c}:{},...u?{color:u}:{},...c?{transition:"filter 0.2s ease"}:{}};return(0,a.jsx)("button",{type:"button",onClick:d,className:["storybook-button","storybook-button--".concat(i),"rounded inline-flex items-center gap-2 transition",{primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-300 text-gray-800 hover:bg-gray-400",danger:"bg-red-600 text-white hover:bg-red-700"}[r],{small:"px-3 py-1 text-sm",medium:"px-4 py-2 text-base",large:"px-5 py-3 text-lg"}[i],m,p].join(" "),style:x,title:o,disabled:l,"aria-label":null!=(t=null!=s?s:o)?t:"Button",children:(0,a.jsxs)("div",{className:"flex justify-center items-center ".concat(n&&s?"gap-2":""," w-full"),children:[n&&(0,a.jsx)("span",{children:n}),(0,a.jsx)("span",{className:"sr-only sm:not-sr-only",children:s})]})})},es=()=>(0,a.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:"calc(100vh - 180px)"},children:j.spinner});var ea=s(760),en=s(8274);function ei(e){let{icon:t,onClick:s,color:n="var(--fg)"}=e;return(0,a.jsx)("button",{onClick:s,className:"rounded-full p-1 transition hover:[filter:brightness(90%)] hover:cursor-pointer",style:{color:n},children:t})}function er(e){let{title:t,children:s,onClose:i,footerActions:r=[]}=e;return(0,n.useEffect)(()=>{let e=e=>"Escape"===e.key&&i();return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),(0,a.jsx)(ea.N,{children:(0,a.jsx)(en.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{e.target===e.currentTarget&&i()},className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-md flex items-center justify-center px-4 py-6",children:(0,a.jsxs)(en.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:"bg-[var(--modal-bg)] text-[var(--fg)] rounded-lg shadow-lg w-full max-w-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-[var(--fg)]",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold w-full text-center",children:t}),(0,a.jsx)(ei,{icon:j.close,onClick:i})]}),(0,a.jsx)("div",{className:"p-6",children:s}),r.length>0&&(0,a.jsx)("div",{className:"flex justify-center gap-2 px-6 py-4 border-t border-[var(--fg)]",children:r.map(e=>{let{icon:t,label:s,variant:n,onClick:i}=e;return(0,a.jsx)(et,{label:s,icon:t,size:"small",variant:n,onClick:i},s)})})]})})})}function el(e){let{value:t,onChange:s,name:n,...i}=e;return(0,a.jsx)("input",{type:"text",name:n,value:t,onChange:s,className:"w-full border border-[var(--fg)] bg-transparent text-[var(--fg)] px-2 py-1 rounded",...i})}function eo(e){let{checked:t,onChange:s,label:n}=e;return(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("div",{className:"relative w-10 h-5 rounded-full transition-colors ".concat(t?"bg-yellow-500":"bg-gray-300"),onClick:()=>s(!t),children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform ".concat(t?"translate-x-5":"")})}),n&&(0,a.jsx)("span",{className:"text-sm select-none",children:n})]})}function ec(e){var t,s,i,r,l;let{currentUser:o,onClose:c,onSubmit:u}=e,[d,m]=(0,n.useState)({id:null==o?void 0:o.id,fullName:null!=(t=null==o?void 0:o.fullName)?t:"",username:null!=(s=null==o?void 0:o.username)?s:"",password:null!=(i=null==o?void 0:o.password)?i:"",isAdmin:null!=(r=null==o?void 0:o.isAdmin)&&r,status:null!=(l=null==o?void 0:o.status)?l:"ACTIVE"}),p=C();return(0,a.jsx)(er,{title:p(o?"user.edit.title":"user.create.title"),onClose:c,footerActions:[{label:p("button.cancel"),icon:j.cancel,variant:"secondary",onClick:c},{label:p("button.save"),icon:j.save,variant:"primary",onClick:()=>u(d)}],children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:p("user.fullName")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:d.fullName,onChange:e=>m(t=>({...t,fullName:e.target.value}))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:p("user.username")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:d.username,onChange:e=>m(t=>({...t,username:e.target.value}))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:p("user.password")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:d.password,onChange:e=>m(t=>({...t,password:e.target.value}))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:p("user.isAdmin")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(eo,{checked:d.isAdmin,onChange:e=>m(t=>({...t,isAdmin:e}))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:p("user.status")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(w,{onChange:e=>m(t=>({...t,status:e})),value:d.status,options:["ACTIVE","BLOCKED"]})})]})]})})}function eu(e){let{filters:t,onChange:s,originalFilters:n,onClose:i,onApply:r}=e,l=C();return(0,a.jsx)(er,{title:l("user.filter.title"),onClose:i,footerActions:[{icon:j.cancel,label:l("button.cancel"),variant:"secondary",onClick:()=>{s(n),i()}},{icon:j.filter,label:l("button.filter.apply"),variant:"primary",onClick:r}],children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:l("user.fullName")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:t.fullName,onChange:e=>s({...t,fullName:e.target.value})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:l("user.username")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:t.username,onChange:e=>s({...t,username:e.target.value})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:l("user.status")}),(0,a.jsx)("div",{className:"col-span-9 flex flex-col gap-2",children:["ACTIVE","BLOCKED"].map(e=>(0,a.jsx)(eo,{checked:t.statusMap[e],onChange:a=>s({...t,statusMap:{...t.statusMap,[e]:a}}),label:e},e))})]})]})})}function ed(e){var t;let{user:s,onClose:n,onConfirm:i}=e,r=C();return(0,a.jsx)(er,{title:r("user.delete.confirmTitle"),onClose:n,footerActions:[{icon:j.cancel,label:r("button.cancel"),variant:"secondary",onClick:n},{icon:j.confirm,label:r("button.confirm"),variant:"danger",onClick:i}],children:(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsx)("p",{children:r("user.delete.confirmBody",{name:null!=(t=s.fullName)?t:s.username})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:r("user.delete.noteSetNull")})]})})}function em(){let e=C(),t=(0,P.wA)(),{data:s=[]}=B(X,(0,P.d4)(L),W),{mutate:i}=K("User",Z,J),{mutate:r}=_("User",H),l=(0,P.d4)($.NE),o=(0,P.d4)(L),[c,u]=(0,n.useState)(o),[d,m]=(0,n.useState)(),[p,x]=(0,n.useState)(),[g,f]=(0,n.useState)(!1),v={ACTIVE:"user--active",BLOCKED:"user--blocked"};return(0,a.jsxs)("section",{className:"p-6 space-y-6 mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-center",children:e("user.management")}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,a.jsx)(et,{variant:"primary",label:e("button.create"),icon:j.plus,size:"small",backgroundColor:(0,ee.o)("--create-bg"),onClick:()=>m({fullName:"",username:"",password:"",isAdmin:!1,status:"ACTIVE"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(et,{variant:"primary",label:e("button.filter"),icon:j.filter,size:"small",backgroundColor:(0,ee.o)("--filter-bg"),onClick:()=>f(!0)}),(0,a.jsx)(et,{variant:"primary",label:e("button.filter.remove"),icon:j.removeFilter,size:"small",backgroundColor:(0,ee.o)("--remove-filter-bg"),onClick:()=>{t((0,D.L)({username:"",fullName:"",statusMap:{ACTIVE:!0,BLOCKED:!1}}))}})]})]}),l?(0,a.jsx)(es,{}):(0,a.jsx)("ul",{className:"space-y-4",children:s.map(t=>{var s;return(0,a.jsxs)("li",{className:"border ".concat(v[t.status]," p-4 rounded shadow-sm flex flex-wrap items-center justify-between gap-4 sm:items-center"),children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("strong",{children:null!=(s=t.fullName)?s:t.username}),(0,a.jsxs)("div",{className:"text-xs text-[var(--text-secondary)]",children:[e("user.role"),":"," ",t.isAdmin?e("user.role.admin"):e("user.role.user")," •"," ",t.status]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 sm:mt-0 ml-auto",children:[(0,a.jsx)(et,{tooltip:e("button.edit"),icon:j.edit,size:"small",variant:"primary",onClick:()=>m(t)}),(0,a.jsx)(et,{tooltip:e("button.delete"),icon:j.delete,size:"small",variant:"danger",onClick:()=>x(t)})]})]},t.id)})}),g&&(0,a.jsx)(eu,{filters:c,onChange:u,originalFilters:o,onClose:()=>f(!1),onApply:()=>{t((0,D.L)(c)),f(!1)}}),d&&(0,a.jsx)(ec,{currentUser:d,onClose:()=>m(void 0),onSubmit:e=>{i({entity:e}),m(void 0)}}),p&&(0,a.jsx)(ed,{user:p,onClose:()=>x(void 0),onConfirm:()=>{r(p.id),x(void 0)}})]})}var ep=s(8820);let ex=(0,M.Mz)([e=>e.tasks.filters],e=>e);async function eg(){return(await q.post("/Task/filter",{})).data}async function ef(e){return(await q.post("/Task",e)).data}async function ev(e){await q.put("/Task/".concat(e.id),e)}async function eh(e){await q.delete("/Task/".concat(e))}let eb=(e,t)=>{let s=e.description.toLowerCase().includes(t.description.toLowerCase()),a=-1===t.assigneeId||(void 0===t.assigneeId?!e.assigneeId:e.assigneeId===t.assigneeId),n=t.statusMap[e.status];return s&&a&&n},ej=()=>G("Task",eg);function ey(e){var t,s,i,r;let{currentTask:l,onClose:o,onSubmit:c}=e,u=C(),[d,m]=(0,n.useState)({id:null==l?void 0:l.id,description:null!=(t=null==l?void 0:l.description)?t:"",assigneeId:null!=(s=null==l?void 0:l.assigneeId)?s:void 0,status:null!=(i=null==l?void 0:l.status)?i:"TODO"}),p=u("task.noAssignee"),x=(0,n.useMemo)(()=>({id:void 0,fullName:p,username:"",password:"",isAdmin:!1,status:"ACTIVE"}),[p]),g=Y().users,[f,v]=(0,n.useState)([]);(0,n.useEffect)(()=>{v([x,...g])},[x,g]);let h=null!=(r=f.find(e=>e.id===d.assigneeId))?r:x;return(0,a.jsx)(er,{title:u(l?"task.edit.title":"task.create.title"),onClose:o,footerActions:[{label:u("button.cancel"),icon:j.cancel,variant:"secondary",onClick:o},{label:u("button.save"),icon:j.save,variant:"primary",onClick:()=>c(d)}],children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:u("task.description")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:d.description,onChange:e=>m(t=>({...t,description:e.target.value}))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:u("task.assignee")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(w,{value:h,options:f,getOptionValue:e=>String(e.id),getOptionLabel:e=>e.fullName,onChange:e=>m(t=>({...t,assigneeId:e.id})),placeholder:u("task.assignee")})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:u("task.status")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(w,{value:d.status,options:["TODO","IN PROGRESS","DONE"],onChange:e=>m(t=>({...t,status:e})),placeholder:u("task.status")})})]})]})})}function ek(e){var t;let{filters:s,onChange:i,originalFilters:r,onClose:l,onApply:o}=e,c=C(),u=c("task.allAssignees"),d=c("task.noAssignee"),m=(0,n.useMemo)(()=>({id:-1,fullName:u,username:"",password:"",isAdmin:!1,status:"ACTIVE"}),[u]),p=(0,n.useMemo)(()=>({id:void 0,fullName:d,username:"",password:"",isAdmin:!1,status:"ACTIVE"}),[d]),x=Y().users,[g,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{f([m,p,...x])},[m,p,x]);let v=null!=(t=g.find(e=>e.id===s.assigneeId))?t:p;return(0,a.jsx)(er,{title:c("task.filter.title"),onClose:l,footerActions:[{icon:j.cancel,label:c("button.cancel"),variant:"secondary",onClick:()=>{i(r),l()}},{icon:j.filter,label:c("button.filter.apply"),variant:"primary",onClick:o}],children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:c("task.description")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(el,{value:s.description,onChange:e=>i({...s,description:e.target.value})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:c("task.assignee")}),(0,a.jsx)("div",{className:"col-span-9",children:(0,a.jsx)(w,{value:v,options:g,getOptionValue:e=>String(e.id),getOptionLabel:e=>e.fullName,onChange:e=>i({...s,assigneeId:e.id})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("label",{className:"col-span-3 text-sm font-medium",children:c("task.status")}),(0,a.jsx)("div",{className:"col-span-9 flex flex-col gap-2",children:["TODO","IN PROGRESS","DONE"].map(e=>(0,a.jsx)(eo,{checked:s.statusMap[e],onChange:t=>i({...s,statusMap:{...s.statusMap,[e]:t}}),label:e},e))})]})]})})}function eN(e){let{task:t,onClose:s,onConfirm:n}=e,i=C();return(0,a.jsx)(er,{title:i("task.delete.confirmTitle"),onClose:s,footerActions:[{icon:j.cancel,label:i("button.cancel"),variant:"secondary",onClick:s},{icon:j.confirm,label:i("button.confirm"),variant:"danger",onClick:n}],children:(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsx)("p",{children:i("task.delete.confirmBody",{name:t.description})}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:i("task.delete.noteSetNull")})]})})}function eC(){let e=C(),t=(0,P.wA)(),{data:s=[]}=B(ej,(0,P.d4)(ex),eb),{mutate:i}=K("Task",ef,ev),{mutate:r}=_("Task",eh),{mutate:l}=(()=>{let e=(0,P.wA)(),t=(0,R.jE)(),s=C(),a=e=>"TODO"===e.status?"IN PROGRESS":"IN PROGRESS"===e.status?"DONE":e.status;return(0,U.n)({mutationFn:async t=>{e((0,$.r1)(!0));let s={...t,status:a(t)};await ev(s)},onSuccess:(n,i)=>{let r=a(i);e((0,$.r1)(!1)),t.invalidateQueries({queryKey:["Task"]}),e((0,$.P0)({type:"success",message:s("task.nextStatus.success",{status:r})}))},onError:t=>{e((0,$.r1)(!1)),e((0,$.P0)({type:"error",message:s("entity.save.error",{entity:s("entity.Task"),message:t.message})})),console.error("Error while moving the task to the next status",t)}})})(),o=(0,P.d4)($.NE),c=(0,P.d4)(ex),[u,d]=(0,n.useState)(c),[m,p]=(0,n.useState)(),[x,g]=(0,n.useState)(),[f,v]=(0,n.useState)(!1),h=Y().users,b={TODO:"task--todo","IN PROGRESS":"task--in-progress ",DONE:"task--done"};return(0,a.jsxs)("section",{className:"p-6 space-y-6 mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-center",children:e("task.management")}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,a.jsx)(et,{variant:"primary",label:e("button.create"),icon:j.plus,size:"small",backgroundColor:(0,ee.o)("--create-bg"),onClick:()=>p({description:"",assigneeId:void 0,status:"DONE"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(et,{variant:"primary",label:e("button.filter"),icon:j.filter,size:"small",backgroundColor:(0,ee.o)("--filter-bg"),onClick:()=>v(!0)}),(0,a.jsx)(et,{variant:"primary",label:e("button.filter.remove"),icon:j.removeFilter,size:"small",backgroundColor:(0,ee.o)("--remove-filter-bg"),onClick:()=>{t((0,ep.T)({description:"",assigneeId:-1,statusMap:{TODO:!0,"IN PROGRESS":!0,DONE:!1}}))}})]})]}),o?(0,a.jsx)(es,{}):(0,a.jsx)("ul",{className:"space-y-4",children:s.map(t=>{var s;return(0,a.jsxs)("li",{className:"border ".concat(b[t.status]," p-4 rounded shadow-sm flex flex-wrap items-center justify-between gap-4 sm:items-center"),children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("strong",{children:t.description}),(0,a.jsxs)("div",{className:"text-xs text-[var(--text-secondary)]",children:[t.assigneeId?null==(s=h.find(e=>e.id===t.assigneeId))?void 0:s.fullName:e("task.noAssignee")," ","• ",t.status]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 sm:mt-0 ml-auto",children:[(0,a.jsx)(et,{tooltip:e("button.edit"),icon:j.edit,size:"small",variant:"primary",onClick:()=>p(t)}),(0,a.jsx)(et,{tooltip:e("button.nextStatus"),icon:j.arrowRight,size:"small",variant:"primary",disabled:"DONE"===t.status,onClick:()=>l(t)}),(0,a.jsx)(et,{tooltip:e("button.delete"),icon:j.delete,size:"small",variant:"danger",onClick:()=>g(t)})]})]},t.id)})}),f&&(0,a.jsx)(ek,{filters:u,onChange:d,originalFilters:c,onClose:()=>v(!1),onApply:()=>{t((0,ep.T)(u)),v(!1)}}),m&&(0,a.jsx)(ey,{currentTask:m,onClose:()=>p(void 0),onSubmit:e=>{i({entity:e}),p(void 0)}}),x&&(0,a.jsx)(eN,{task:x,onClose:()=>g(void 0),onConfirm:()=>{r(x.id),g(void 0)}})]})}function ew(e){let{onClose:t}=e,s=C();return(0,a.jsx)(er,{title:s("author.title"),onClose:t,footerActions:[{icon:j.cancel,label:s("button.cancel"),variant:"secondary",onClick:t}],children:(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsx)("p",{children:s("author.line1")}),(0,a.jsx)("p",{children:s("author.line2")}),(0,a.jsx)("p",{children:s("author.line3")})]})})}function eA(){let[e,t]=(0,n.useState)(!1),s=C(),{view:i,setView:r}=function(){let e=(0,n.useContext)(O.r4);if(!e)throw Error("useView must be used within ViewProvider");return e}(),l={Functionalities:[{label:s("menu.functionalities.tasks"),icon:y.tasks,onClick:()=>r("tasks")},{label:s("menu.functionalities.users"),icon:y.users,onClick:()=>r("users")}],About:[{label:s("menu.about.onAuthor"),icon:y.author,onClick:()=>t(!0)},{label:s("menu.about.portfolio"),icon:y.portfolio,href:"https://AleDeP10.github.io/"}]};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col w-[92vw] md:w-[80vw] max-w-[1000px] mx-auto bg-[var(--bg)] text-[var(--fg)]",children:[(0,a.jsx)(I,{menuItems:l}),(0,a.jsxs)("main",{className:"flex-1 p-6",children:["users"===i&&(0,a.jsx)(em,{}),"tasks"===i&&(0,a.jsx)(eC,{})]}),e&&(0,a.jsx)(ew,{onClose:()=>t(!1)})]})}function eE(){return(0,a.jsx)("div",{className:"font-sans grid grid-rows-[auto_1fr_auto] items-center justify-items-center min-h-screen",children:(0,a.jsx)(eA,{})})}},6379:(e,t,s)=>{"use strict";s.d(t,{he:()=>a.he,NE:()=>n,GK:()=>a.GK,r1:()=>a.r1,P0:()=>a.P0});var a=s(7670);let n=(0,s(8924).Mz)([e=>e.ui],e=>e.loadingEntities)},6721:(e,t,s)=>{"use strict";s.d(t,{s:()=>o,o:()=>c,t:()=>d});let a=JSON.parse('{"button.create":"Crea","button.edit":"Modifica","button.delete":"Cancella","button.save":"Salva","button.filter":"Filtra","button.filter.remove":"Rimuovi filtri","button.filter.apply":"Applica","button.cancel":"Annulla","button.confirm":"Conferma","entity.User":"Utente","entity.Task":"Task","entity.fetch.error":"Errore durante il caricamento {{entity}}: {{message}}","entity.save.success":"{{entity}} salvato con successo","entity.save.error":"Errore durante il salvataggio {{entity}}: {{message}}","entity.delete.success":"{{entity}} cancellato con successo","entity.delete.error":"Errore durante la cancellazione {{entity}}: {{message}}","user.management":"Gestione utenti","user.username":"Username","user.password":"Password","user.fullName":"Nome completo","user.status":"Stato","user.isAdmin":"Amministratore","user.role":"Ruolo","user.role.admin":"Amministratore","user.role.user":"Utente","user.filter.title":"Filtra utenti","user.create.title":"Crea utente","user.edit.title":"Modifica utente","user.title.title":"Cancella utente","user.delete.confirmTitle":"Conferma eliminazione","user.delete.confirmBody":"Sei sicuro di voler eliminare {{name}}? Questa operazione \xe8 irreversibile.","user.delete.noteSetNull":"I task assegnati saranno disassociati automaticamente.","task.management":"Gestione task","task.description":"Descrizione","task.assignee":"Assegnatario","task.status":"Status","task.noAssignee":"-- Non assegnato --","task.allAssignees":"-- Tutti --","task.nextStatus":"Passa allo stato successivo","task.nextStatus.success":"Task passato allo stato {{status}}","task.filter.title":"Filtra task","task.create.title":"Crea task","task.edit.title":"Modifica task","task.delete.confirmTitle":"Conferma eliminazione","task.delete.confirmBody":"Sei sicuro di voler eliminare {{description}}? Questa operazione \xe8 irreversibile.","menu.section.functionalities":"Funzionalit\xe0","menu.functionalities.tasks":"Task","menu.functionalities.users":"Utenti","menu.section.about":"Informazioni","menu.about.onAuthor":"Chi sono","menu.about.portfolio":"Portfolio","author.title":"Alessandro De Prato","author.line1":"Sono uno sviluppatore fullstack curioso e versatile, costantemente alla ricerca di tecnologie innovative. Amo imparare in autonomia, sperimentando nuove soluzioni attraverso l’implementazione di progetti completi e curati, dove ogni dettaglio conta.","author.line2":"Mi piace costruire interfacce pensate per l’utente, con un’architettura solida e un design che non lascia nulla al caso. Dietro ogni feature c’\xe8 la volont\xe0 di coniugare performance, pulizia del codice e modularit\xe0. Credo nel refactoring continuo e nella scalabilit\xe0 come motore dell’innovazione: non si tratta solo di “far funzionare”, ma di farlo bene, oggi e domani.","author.line3":"Con questo progetto ho voluto dimostrare che anche una ToDo app pu\xf2 avere anima: precisione nei dettagli, scelte consapevoli, e un pizzico di carattere."}'),n=JSON.parse('{"button.create":"Create","button.edit":"Edit","button.delete":"Delete","button.save":"Save","button.filter":"Filter","button.filter.remove":"Remove filters","button.filter.apply":"Apply","button.cancel":"Cancel","button.confirm":"Confirm","entity.User":"User","entity.Task":"Task","entity.fetch.error":"Error while loading {{entity}}: {{error}}","entity.save.success":"{{entity}} saved successfully","entity.save.error":"Error while saving {{entity}}: {{error}}","entity.delete.success":"{{entity}} deleted successfully","entity.delete.error":"Error while deleting {{entity}}: {{error}}","user.management":"Users management","user.username":"Username","user.password":"Password","user.fullName":"Full name","user.status":"Status","user.isAdmin":"Administrator","user.role":"Role","user.role.admin":"Administrator","user.role.user":"User","user.filter.title":"Filter users","user.create.title":"Create user","user.edit.title":"Edit user","user.delete.confirmTitle":"Confirm deletion","user.delete.confirmBody":"Are you sure you want to delete {{name}}? This action cannot be undone.","user.delete.noteSetNull":"Assigned tasks will be automatically unlinked.","task.management":"Tasks management","task.description":"Description","task.assignee":"Assignee","task.status":"Status","task.noAssignee":"-- Unassigned --","task.allAssignees":"-- All --","task.nextStatus":"Move to next status","task.nextStatus.success":"Task moved to {{status}} status","task.filter.title":"Filter tasks","task.create.title":"Create task","task.edit.title":"Edit task","task.delete.confirmTitle":"Confirm deletion","task.delete.confirmBody":"Are you sure you want to delete \\"{{description}}\\"? This action cannot be undone.","menu.section.functionalities":"Features","menu.functionalities.tasks":"Tasks","menu.functionalities.users":"Users","menu.section.about":"About","menu.about.onAuthor":"About me","menu.about.portfolio":"Portfolio","author.title":"Alessandro De Prato","author.line1":"I\'m a curious and versatile fullstack developer, constantly exploring innovative technologies. I love to learn independently, experimenting with new solutions by building complete and polished projects where every detail matters.","author.line2":"I enjoy crafting interfaces that are user-centered, supported by solid architecture and thoughtful design. Behind every feature lies a drive to combine performance, clean code, and modularity. I believe in continuous refactoring and scalability as engines of innovation — it’s not just about making things work, but about making them work well, today and tomorrow.","author.line3":"With this project, I wanted to prove that even a ToDo app can have soul: precision in every detail, thoughtful choices, and a touch of character."}');var i=s(5155),r=s(2115);let l=(0,r.createContext)(void 0),o=l;function c(e){let{children:t}=e,[s,a]=(0,r.useState)("it");return(0,r.useEffect)(()=>{let e=localStorage.getItem("lang");("en"===e||"it"===e)&&a(e)},[]),(0,i.jsx)(l.Provider,{value:{lang:s,setLang:e=>{localStorage.setItem("lang",e),a(e)}},children:t})}let u={it:a,en:n};function d(e,t,s){var a,n;let i=null!=(n=null==(a=u[e])?void 0:a[t])?n:t;return s&&Object.entries(s).forEach(e=>{let[t,s]=e,a=RegExp("{{\\s*".concat(t,"\\s*}}"),"g");i=i.replace(a,String(s))}),i}},7670:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>o,GK:()=>l,P0:()=>i,he:()=>r,r1:()=>n});let a=(0,s(1990).Z0)({name:"ui",initialState:{loadingEntities:!1,toast:null},reducers:{setLoading(e,t){e.loadingEntities=t.payload},showToast:(e,t)=>{e.toast=t.payload},clearToast:e=>{e.toast=null}}}),{setLoading:n,showToast:i,clearToast:r}=a.actions,l=e=>e.ui.toast,o=a.reducer},7848:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,L:()=>n});let a=(0,s(1990).Z0)({name:"user",initialState:{filters:{username:"",fullName:"",statusMap:{ACTIVE:!0,BLOCKED:!1}}},reducers:{setUserFilters(e,t){e.filters=t.payload}}}),{setUserFilters:n}=a.actions,i=a.reducer},8820:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,T:()=>n});let a=(0,s(1990).Z0)({name:"task",initialState:{filters:{description:"",assigneeId:-1,statusMap:{TODO:!0,"IN PROGRESS":!0,DONE:!1}}},reducers:{setTaskFilters(e,t){e.filters=t.payload}}}),{setTaskFilters:n}=a.actions,i=a.reducer},9673:()=>{}},e=>{e.O(0,[832,139,872,441,964,358],()=>e(e.s=3810)),_N_E=e.O()}]);